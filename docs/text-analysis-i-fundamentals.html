<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Text Analysis I: Fundamentals | An introduction to text analysis with R for sensory and consumer scientists</title>
  <meta name="description" content="5 Text Analysis I: Fundamentals | An introduction to text analysis with R for sensory and consumer scientists" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Text Analysis I: Fundamentals | An introduction to text analysis with R for sensory and consumer scientists" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Text Analysis I: Fundamentals | An introduction to text analysis with R for sensory and consumer scientists" />
  
  
  

<meta name="author" content="Jacob Lahne" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-visualization-basics-with-ggplot2.html"/>
<link rel="next" href="text-analysis-ii-term-frequency-approaches.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction and welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#introductions"><i class="fa fa-check"></i>Introductions</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#jacob-lahne-phd"><i class="fa fa-check"></i>Jacob Lahne, PhD</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#leah-hamilton-phd"><i class="fa fa-check"></i>Leah Hamilton, PhD</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#martha-calvert-ms"><i class="fa fa-check"></i>Martha Calvert, MS</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#todays-agenda"><i class="fa fa-check"></i>Today’s agenda</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-were-going-to-run"><i class="fa fa-check"></i>How we’re going to run</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#recommended-approach-for-livecoding"><i class="fa fa-check"></i>Recommended approach for livecoding</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#dealing-with-errors"><i class="fa fa-check"></i>Dealing with errors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="a-crash-course-in-r.html"><a href="a-crash-course-in-r.html"><i class="fa fa-check"></i><b>1</b> A crash course in <code>R</code></a>
<ul>
<li class="chapter" data-level="1.1" data-path="a-crash-course-in-r.html"><a href="a-crash-course-in-r.html#r-vs-rstudio"><i class="fa fa-check"></i><b>1.1</b> <code>R</code> vs RStudio</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="a-crash-course-in-r.html"><a href="a-crash-course-in-r.html#what-is-r"><i class="fa fa-check"></i><b>1.1.1</b> What is <code>R</code>?</a></li>
<li class="chapter" data-level="1.1.2" data-path="a-crash-course-in-r.html"><a href="a-crash-course-in-r.html#great-why-are-we-using-rstudio-then"><i class="fa fa-check"></i><b>1.1.2</b> Great, why are we using RStudio then?</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="a-crash-course-in-r.html"><a href="a-crash-course-in-r.html#the-parts-of-rstudio"><i class="fa fa-check"></i><b>1.2</b> The parts of RStudio</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="a-crash-course-in-r.html"><a href="a-crash-course-in-r.html#the-working-directory-and-why-you-should-care"><i class="fa fa-check"></i><b>1.2.1</b> The “working directory” and why you should care</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="a-crash-course-in-r.html"><a href="a-crash-course-in-r.html#extending-r-with-packages"><i class="fa fa-check"></i><b>1.3</b> Extending <code>R</code> with packages</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="a-crash-course-in-r.html"><a href="a-crash-course-in-r.html#installing-packages"><i class="fa fa-check"></i><b>1.3.1</b> Installing packages</a></li>
<li class="chapter" data-level="1.3.2" data-path="a-crash-course-in-r.html"><a href="a-crash-course-in-r.html#loading-packages"><i class="fa fa-check"></i><b>1.3.2</b> Loading packages</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="a-crash-course-in-r.html"><a href="a-crash-course-in-r.html#getting-help"><i class="fa fa-check"></i><b>1.4</b> Getting help</a></li>
<li class="chapter" data-level="1.5" data-path="a-crash-course-in-r.html"><a href="a-crash-course-in-r.html#livecoding-along"><i class="fa fa-check"></i><b>1.5</b> Livecoding along</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="how-to-work-with-r.html"><a href="how-to-work-with-r.html"><i class="fa fa-check"></i><b>2</b> How to work with R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="how-to-work-with-r.html"><a href="how-to-work-with-r.html#doing-math-and-creating-objects-in-r"><i class="fa fa-check"></i><b>2.1</b> Doing math and creating objects in <code>R</code></a></li>
<li class="chapter" data-level="2.2" data-path="how-to-work-with-r.html"><a href="how-to-work-with-r.html#functions-and-their-arguments-in-r"><i class="fa fa-check"></i><b>2.2</b> Functions and their arguments in <code>R</code></a></li>
<li class="chapter" data-level="2.3" data-path="how-to-work-with-r.html"><a href="how-to-work-with-r.html#reading-data-into-r"><i class="fa fa-check"></i><b>2.3</b> Reading data into <code>R</code></a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="how-to-work-with-r.html"><a href="how-to-work-with-r.html#where-the-data-lives"><i class="fa fa-check"></i><b>2.3.1</b> Where the data lives</a></li>
<li class="chapter" data-level="2.3.2" data-path="how-to-work-with-r.html"><a href="how-to-work-with-r.html#what-kind-of-file-are-we-importing"><i class="fa fa-check"></i><b>2.3.2</b> What kind of file are we importing?</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="how-to-work-with-r.html"><a href="how-to-work-with-r.html#data-in-r"><i class="fa fa-check"></i><b>2.4</b> Data in <code>R</code></a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="how-to-work-with-r.html"><a href="how-to-work-with-r.html#subsetting-data"><i class="fa fa-check"></i><b>2.4.1</b> Subsetting data</a></li>
<li class="chapter" data-level="2.4.2" data-path="how-to-work-with-r.html"><a href="how-to-work-with-r.html#complex-vectorslists-data.frame-and-tibble"><i class="fa fa-check"></i><b>2.4.2</b> Complex vectors/lists: <code>data.frame</code> and <code>tibble</code></a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="how-to-work-with-r.html"><a href="how-to-work-with-r.html#subsetting-and-wrangling-data-tables"><i class="fa fa-check"></i><b>2.5</b> Subsetting and wrangling data tables</a></li>
<li class="chapter" data-level="2.6" data-path="how-to-work-with-r.html"><a href="how-to-work-with-r.html#psa-not-knowing-is-normal"><i class="fa fa-check"></i><b>2.6</b> PSA: not-knowing is normal!</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="wrangling-data-with-tidyverse.html"><a href="wrangling-data-with-tidyverse.html"><i class="fa fa-check"></i><b>3</b> Wrangling data with <code>tidyverse</code></a>
<ul>
<li class="chapter" data-level="3.1" data-path="wrangling-data-with-tidyverse.html"><a href="wrangling-data-with-tidyverse.html#subsetting-data-1"><i class="fa fa-check"></i><b>3.1</b> Subsetting data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="wrangling-data-with-tidyverse.html"><a href="wrangling-data-with-tidyverse.html#select-for-columns"><i class="fa fa-check"></i><b>3.1.1</b> <code>select()</code> for columns</a></li>
<li class="chapter" data-level="3.1.2" data-path="wrangling-data-with-tidyverse.html"><a href="wrangling-data-with-tidyverse.html#filter-for-rows"><i class="fa fa-check"></i><b>3.1.2</b> <code>filter()</code> for rows</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="wrangling-data-with-tidyverse.html"><a href="wrangling-data-with-tidyverse.html#combining-steps-with-the-pipe"><i class="fa fa-check"></i><b>3.2</b> Combining steps with the pipe: <code>%&gt;%</code></a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="wrangling-data-with-tidyverse.html"><a href="wrangling-data-with-tidyverse.html#pipes-require-that-the-lefthand-side-be-a-single-functional-command"><i class="fa fa-check"></i><b>3.2.1</b> Pipes require that the lefthand side be a single functional command</a></li>
<li class="chapter" data-level="3.2.2" data-path="wrangling-data-with-tidyverse.html"><a href="wrangling-data-with-tidyverse.html#pipes-always-pass-the-result-of-the-lefthand-side-to-the-first-argument-of-the-righthand-side"><i class="fa fa-check"></i><b>3.2.2</b> Pipes always pass the result of the lefthand side to the <em>first</em> argument of the righthand side</a></li>
<li class="chapter" data-level="3.2.3" data-path="wrangling-data-with-tidyverse.html"><a href="wrangling-data-with-tidyverse.html#pipes-are-a-pain-to-type"><i class="fa fa-check"></i><b>3.2.3</b> Pipes are a pain to type</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="wrangling-data-with-tidyverse.html"><a href="wrangling-data-with-tidyverse.html#make-new-columns-mutate"><i class="fa fa-check"></i><b>3.3</b> Make new columns: <code>mutate()</code></a></li>
<li class="chapter" data-level="3.4" data-path="wrangling-data-with-tidyverse.html"><a href="wrangling-data-with-tidyverse.html#split-apply-combine-analyses-with-group_by-and-summarize"><i class="fa fa-check"></i><b>3.4</b> Split-apply-combine analyses with <code>group_by()</code> and <code>summarize()</code></a></li>
<li class="chapter" data-level="3.5" data-path="wrangling-data-with-tidyverse.html"><a href="wrangling-data-with-tidyverse.html#utilities-for-data-management"><i class="fa fa-check"></i><b>3.5</b> Utilities for data management</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="wrangling-data-with-tidyverse.html"><a href="wrangling-data-with-tidyverse.html#rename-your-columns"><i class="fa fa-check"></i><b>3.5.1</b> Rename your columns</a></li>
<li class="chapter" data-level="3.5.2" data-path="wrangling-data-with-tidyverse.html"><a href="wrangling-data-with-tidyverse.html#relocate-your-columns"><i class="fa fa-check"></i><b>3.5.2</b> Relocate your columns</a></li>
<li class="chapter" data-level="3.5.3" data-path="wrangling-data-with-tidyverse.html"><a href="wrangling-data-with-tidyverse.html#sort-your-data"><i class="fa fa-check"></i><b>3.5.3</b> Sort your data</a></li>
<li class="chapter" data-level="3.5.4" data-path="wrangling-data-with-tidyverse.html"><a href="wrangling-data-with-tidyverse.html#pivot-tables"><i class="fa fa-check"></i><b>3.5.4</b> Pivot tables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-visualization-basics-with-ggplot2.html"><a href="data-visualization-basics-with-ggplot2.html"><i class="fa fa-check"></i><b>4</b> Data visualization basics with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-visualization-basics-with-ggplot2.html"><a href="data-visualization-basics-with-ggplot2.html#your-first-ggplot"><i class="fa fa-check"></i><b>4.1</b> Your first <code>ggplot()</code></a></li>
<li class="chapter" data-level="4.2" data-path="data-visualization-basics-with-ggplot2.html"><a href="data-visualization-basics-with-ggplot2.html#the-aes-function-and-mapping-argument"><i class="fa fa-check"></i><b>4.2</b> The <code>aes()</code> function and <code>mapping =</code> argument</a></li>
<li class="chapter" data-level="4.3" data-path="data-visualization-basics-with-ggplot2.html"><a href="data-visualization-basics-with-ggplot2.html#adding-layers-with-geom_-functions"><i class="fa fa-check"></i><b>4.3</b> Adding layers with <code>geom_*()</code> functions</a></li>
<li class="chapter" data-level="4.4" data-path="data-visualization-basics-with-ggplot2.html"><a href="data-visualization-basics-with-ggplot2.html#arguments-inside-and-outside-of-aes"><i class="fa fa-check"></i><b>4.4</b> Arguments inside and outside of <code>aes()</code></a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="data-visualization-basics-with-ggplot2.html"><a href="data-visualization-basics-with-ggplot2.html#using-theme_-to-change-visual-options-quickly"><i class="fa fa-check"></i><b>4.4.1</b> Using <code>theme_*()</code> to change visual options quickly</a></li>
<li class="chapter" data-level="4.4.2" data-path="data-visualization-basics-with-ggplot2.html"><a href="data-visualization-basics-with-ggplot2.html#changing-aesthetic-elements-with-scale_-functions"><i class="fa fa-check"></i><b>4.4.2</b> Changing aesthetic elements with <code>scale_*()</code> functions</a></li>
<li class="chapter" data-level="4.4.3" data-path="data-visualization-basics-with-ggplot2.html"><a href="data-visualization-basics-with-ggplot2.html#finally-facet_"><i class="fa fa-check"></i><b>4.4.3</b> Finally, <code>facet_*()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data-visualization-basics-with-ggplot2.html"><a href="data-visualization-basics-with-ggplot2.html#some-further-reading"><i class="fa fa-check"></i><b>4.5</b> Some further reading</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="text-analysis-i-fundamentals.html"><a href="text-analysis-i-fundamentals.html"><i class="fa fa-check"></i><b>5</b> Text Analysis I: Fundamentals</a>
<ul>
<li class="chapter" data-level="5.1" data-path="text-analysis-i-fundamentals.html"><a href="text-analysis-i-fundamentals.html#getting-your-text-data"><i class="fa fa-check"></i><b>5.1</b> Getting your text data</a></li>
<li class="chapter" data-level="5.2" data-path="text-analysis-i-fundamentals.html"><a href="text-analysis-i-fundamentals.html#basic-import-and-cleaning-with-text-data"><i class="fa fa-check"></i><b>5.2</b> Basic import and cleaning with text data</a></li>
<li class="chapter" data-level="5.3" data-path="text-analysis-i-fundamentals.html"><a href="text-analysis-i-fundamentals.html#where-is-the-data-in-character-a-tidy-approach."><i class="fa fa-check"></i><b>5.3</b> Where is the data in <code>character</code>? A <em>tidy</em> approach.</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="text-analysis-ii-term-frequency-approaches.html"><a href="text-analysis-ii-term-frequency-approaches.html"><i class="fa fa-check"></i><b>6</b> Text Analysis II: Term Frequency Approaches</a>
<ul>
<li class="chapter" data-level="6.1" data-path="text-analysis-ii-term-frequency-approaches.html"><a href="text-analysis-ii-term-frequency-approaches.html#basic-text-analysis-approaches-using-tokens"><i class="fa fa-check"></i><b>6.1</b> Basic text analysis approaches using tokens</a></li>
<li class="chapter" data-level="6.2" data-path="text-analysis-ii-term-frequency-approaches.html"><a href="text-analysis-ii-term-frequency-approaches.html#word-counts"><i class="fa fa-check"></i><b>6.2</b> Word counts</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="text-analysis-ii-term-frequency-approaches.html"><a href="text-analysis-ii-term-frequency-approaches.html#stop-words"><i class="fa fa-check"></i><b>6.2.1</b> “stop words”</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="text-analysis-ii-term-frequency-approaches.html"><a href="text-analysis-ii-term-frequency-approaches.html#term-frequency-inverse-document-frequency-tf-idf"><i class="fa fa-check"></i><b>6.3</b> Term Frequency-Inverse Document Frequency (TF-IDF)</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="text-analysis-ii-term-frequency-approaches.html"><a href="text-analysis-ii-term-frequency-approaches.html#term-frequency"><i class="fa fa-check"></i><b>6.3.1</b> Term Frequency</a></li>
<li class="chapter" data-level="6.3.2" data-path="text-analysis-ii-term-frequency-approaches.html"><a href="text-analysis-ii-term-frequency-approaches.html#inverse-document-frequency"><i class="fa fa-check"></i><b>6.3.2</b> Inverse Document Frequency</a></li>
<li class="chapter" data-level="6.3.3" data-path="text-analysis-ii-term-frequency-approaches.html"><a href="text-analysis-ii-term-frequency-approaches.html#applying-tf-idf-in-tidytext"><i class="fa fa-check"></i><b>6.3.3</b> Applying tf-idf in <code>tidytext</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="text-analysis-iii-sentiment-analysis.html"><a href="text-analysis-iii-sentiment-analysis.html"><i class="fa fa-check"></i><b>7</b> Text Analysis III: Sentiment Analysis</a>
<ul>
<li class="chapter" data-level="7.1" data-path="text-analysis-iii-sentiment-analysis.html"><a href="text-analysis-iii-sentiment-analysis.html#sentiment-analysis"><i class="fa fa-check"></i><b>7.1</b> Sentiment analysis</a></li>
<li class="chapter" data-level="7.2" data-path="text-analysis-iii-sentiment-analysis.html"><a href="text-analysis-iii-sentiment-analysis.html#n-gram-models"><i class="fa fa-check"></i><b>7.2</b> <em>n</em>-gram models</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="wrap-up-and-further-resources.html"><a href="wrap-up-and-further-resources.html"><i class="fa fa-check"></i><b>8</b> Wrap-up and further resources</a>
<ul>
<li class="chapter" data-level="8.1" data-path="wrap-up-and-further-resources.html"><a href="wrap-up-and-further-resources.html#getting-help-1"><i class="fa fa-check"></i><b>8.1</b> Getting help</a></li>
<li class="chapter" data-level="8.2" data-path="wrap-up-and-further-resources.html"><a href="wrap-up-and-further-resources.html#learning-more-with-sensometrics-society"><i class="fa fa-check"></i><b>8.2</b> Learning more with Sensometrics Society</a></li>
<li class="chapter" data-level="8.3" data-path="wrap-up-and-further-resources.html"><a href="wrap-up-and-further-resources.html#further-readingresources"><i class="fa fa-check"></i><b>8.3</b> Further reading/resources</a></li>
<li class="chapter" data-level="8.4" data-path="wrap-up-and-further-resources.html"><a href="wrap-up-and-further-resources.html#questionscomments"><i class="fa fa-check"></i><b>8.4</b> Questions/Comments</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An introduction to text analysis with R for sensory and consumer scientists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="text-analysis-i-fundamentals" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> Text Analysis I: Fundamentals<a href="text-analysis-i-fundamentals.html#text-analysis-i-fundamentals" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>At this point we’ve gone over the fundamentals of data wrangling and analysis in R. We really haven’t touched on statistics and modeling, as that is outside the scope of this workshop, but I will be glad to chat about those with anyone outside of the main workshop if you have questions.</p>
<p>Now we’re going to turn to our key focus: text analysis in R. We are going to focus on 3 broad areas:</p>
<ol style="list-style-type: decimal">
<li>Importing, cleaning, and wrangling text data and dealing with <code>character</code> type data.</li>
<li>Basic text modeling using the TF-IDF framework</li>
<li>Application: Sentiment Analysis</li>
</ol>
<p>It’s not a bad idea to restart your R session here. Make sure to save your work, but a clean <code>Environment</code> is great when we’re shifting topics.</p>
<p>You can accomplish this by going to <code>Session &gt; Restart R</code> in the menu.</p>
<p>Then, we want to make sure to re-load our packages and import our data.</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="text-analysis-i-fundamentals.html#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The packages we&#39;re using</span></span>
<span id="cb178-2"><a href="text-analysis-i-fundamentals.html#cb178-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb178-3"><a href="text-analysis-i-fundamentals.html#cb178-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb178-4"><a href="text-analysis-i-fundamentals.html#cb178-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-5"><a href="text-analysis-i-fundamentals.html#cb178-5" aria-hidden="true" tabindex="-1"></a><span class="co"># The dataset</span></span>
<span id="cb178-6"><a href="text-analysis-i-fundamentals.html#cb178-6" aria-hidden="true" tabindex="-1"></a>beer_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/ba_2002.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 20359 Columns: 14
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (5): reviews, beer_name, brewery_name, style, user_id
## dbl (9): beer_id, brewery_id, abv, appearance, aroma, palate, taste, overall...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div id="getting-your-text-data" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Getting your text data<a href="text-analysis-i-fundamentals.html#getting-your-text-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are many sources of text data, which is one of the strengths of this approach. Some quick and obvious examples include:</p>
<ol style="list-style-type: decimal">
<li>Open-comment responses on a survey (sensory study in lab, remote survey, etc)</li>
<li>Comment cards or customer responses</li>
<li>Qualitative data (transcripts from interviews and focus groups)</li>
<li>Compiled/database from previous studies</li>
<li>Scraped data from websites and/or social media</li>
</ol>
<p>The last (#5) is often the most interesting data source, and there are a number of papers in recent years that have discussed the use of this sort of data. I am not going to discuss how to obtain text data in this presentation, because it is its own, rich topic. However, you can <a href="https://github.com/jlahne/text-mining-eurosense-2020">review my presentation and tutorial from Eurosense 2020</a> if you want a quick crash course on web scraping for sensory evaluation.</p>
</div>
<div id="basic-import-and-cleaning-with-text-data" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Basic import and cleaning with text data<a href="text-analysis-i-fundamentals.html#basic-import-and-cleaning-with-text-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>So far we’ve focused our attention on the <code>beer_data</code> data set on the various (<code>numeric</code>) rating variables. But the data in the <code>reviews</code> column is clearly more rich.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="text-analysis-i-fundamentals.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2</span>)</span>
<span id="cb180-2"><a href="text-analysis-i-fundamentals.html#cb180-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-3"><a href="text-analysis-i-fundamentals.html#cb180-3" aria-hidden="true" tabindex="-1"></a>reviews_example <span class="ot">&lt;-</span> </span>
<span id="cb180-4"><a href="text-analysis-i-fundamentals.html#cb180-4" aria-hidden="true" tabindex="-1"></a>  beer_data <span class="sc">%&gt;%</span></span>
<span id="cb180-5"><a href="text-analysis-i-fundamentals.html#cb180-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb180-6"><a href="text-analysis-i-fundamentals.html#cb180-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-7"><a href="text-analysis-i-fundamentals.html#cb180-7" aria-hidden="true" tabindex="-1"></a>reviews_example <span class="sc">%&gt;%</span></span>
<span id="cb180-8"><a href="text-analysis-i-fundamentals.html#cb180-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(beer_name, reviews) <span class="sc">%&gt;%</span></span>
<span id="cb180-9"><a href="text-analysis-i-fundamentals.html#cb180-9" aria-hidden="true" tabindex="-1"></a>  gt<span class="sc">::</span><span class="fu">gt</span>()</span></code></pre></div>
<div id="qlirkacvpr" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#qlirkacvpr .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qlirkacvpr .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qlirkacvpr .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qlirkacvpr .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qlirkacvpr .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qlirkacvpr .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qlirkacvpr .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qlirkacvpr .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qlirkacvpr .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qlirkacvpr .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qlirkacvpr .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qlirkacvpr .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#qlirkacvpr .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qlirkacvpr .gt_from_md > :first-child {
  margin-top: 0;
}

#qlirkacvpr .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qlirkacvpr .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qlirkacvpr .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qlirkacvpr .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qlirkacvpr .gt_row_group_first td {
  border-top-width: 2px;
}

#qlirkacvpr .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qlirkacvpr .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qlirkacvpr .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qlirkacvpr .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qlirkacvpr .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qlirkacvpr .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qlirkacvpr .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qlirkacvpr .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qlirkacvpr .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qlirkacvpr .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qlirkacvpr .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qlirkacvpr .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qlirkacvpr .gt_left {
  text-align: left;
}

#qlirkacvpr .gt_center {
  text-align: center;
}

#qlirkacvpr .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qlirkacvpr .gt_font_normal {
  font-weight: normal;
}

#qlirkacvpr .gt_font_bold {
  font-weight: bold;
}

#qlirkacvpr .gt_font_italic {
  font-style: italic;
}

#qlirkacvpr .gt_super {
  font-size: 65%;
}

#qlirkacvpr .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#qlirkacvpr .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#qlirkacvpr .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qlirkacvpr .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#qlirkacvpr .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#qlirkacvpr .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">beer_name</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">reviews</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">Stoudt's Weizen</td>
<td class="gt_row gt_left">Medium straw and cloudy with thick head and lace. Fresh smelling with slight lemon zest aroma.  Taste is rich and fulfilling with strong lemon flavor. Also notable is the strong, almost overwhealming clove flavor.  Fresh and thirst quenching. Goes great with brats at a German festival.</td></tr>
    <tr><td class="gt_row gt_left">Black Bear Ale</td>
<td class="gt_row gt_left">(3-31-03): Got a new bottle thanks to johnrobe, and unfortunately it was just as bad. This brewery either has ongoing issues or the beer is really supposed to taste this way. I am guessing it is the former. (12-09-02): Acquired via trade. This may be a good beer and I may have gotten a bad bottle but the vinegar aroma ruined this beer. I was given pause before I even had a chance to take a sip because the vinegar aroma is so potent. Plugging my nose and drinking did not help much as the vinegar was prevalent in the flavor as well. I will give this one another shot down the road but I had to pour this one out.</td></tr>
    <tr><td class="gt_row gt_left">Kozel</td>
<td class="gt_row gt_left">A truly good, authentic Pilsner, bordering on great. This is the type of Pilsner Beck's or Labatts (and most North American brewers) wished they could produce. They can't, this brew took time. Brew time and cellar time. The quality of ingredients and process are there for the palate to enjoy on this Pilsner. Soft barley and malt tastes balanced with those heavenly saaz bitters. A great example of Czech pilsen style lagers. This one has a distinguishing quality though. It has everything required of a good Pilsner, flowery hopping evident to the nose and palate, sharp crisp start, tart/malty/grassy in the mouth  dry finish except, this one has no lingering &amp;quot;tinny&amp;quot; taste to the tongue from the saaz hops....probably not pasteurized. I liked this Pilsner very much and that takes something for this fanatical &amp;quot;Pils head&amp;quot;.  The only draw back is the price. $2.85 per 500mil bottle. I was surprised this beer was so fresh tasting, date code was near expired and it sat unrefrigerated on the LCBO (our state liquor monopoly) shelf.  A must try if you like Pilsners.</td></tr>
    <tr><td class="gt_row gt_left">Odell Cutthroat Pale Ale</td>
<td class="gt_row gt_left">This beer pours with a deep thick copper color and a thick foamy white head.   The huge spicy aroma has just a hint of malt.  The smooth medium body initiates an up-front caramel malt sweetness followed by a sharp spicy bitter bite. Very tasty.</td></tr>
    <tr><td class="gt_row gt_left">Pike XXXXX Stout</td>
<td class="gt_row gt_left">Nice pour, deep opaque black with an easy, thick creamy head that clings to the sides of the glass. It's not exactly long-lasting, but it never fully fades (ends up thin cream layer that's too thick for a film, but kind of like a like coat of moss or lichens). The aroma is a little weak, but roasty. The flavor is as strong as it should be but it dominated and unbalanced by too much burned bitterness. A bit of smokiness lingers underneath. The lack of balance makes this less than a joy to drink, but intriguing at the same time.</td></tr>
  </tbody>
  
  
</table>
</div>
<p>
<p>However, this has some classic features of scraped text data–notice the “&amp;quot”, for example–this is <code>HTML</code> placeholder for a quotation mark. Other common problems that you will see with text data include “parsing errors” between different forms of character data–the most common is between <code>ASCII</code> and <code>UTF-8</code> standards. You will of course also encounter errors with typos, and perhaps idiosyncratic formatting characteristic of different text sources: for example, the use of <code>@usernames</code> and <code>#hashtags</code> in Twitter data.</p>
<p>We will use the <code>textclean</code> package to do some basic clean up, but this kind of deep data cleaning may take more steps and will change from project to project.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="text-analysis-i-fundamentals.html#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(textclean)</span>
<span id="cb181-2"><a href="text-analysis-i-fundamentals.html#cb181-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-3"><a href="text-analysis-i-fundamentals.html#cb181-3" aria-hidden="true" tabindex="-1"></a>cleaned_reviews_example <span class="ot">&lt;-</span> </span>
<span id="cb181-4"><a href="text-analysis-i-fundamentals.html#cb181-4" aria-hidden="true" tabindex="-1"></a>  reviews_example <span class="sc">%&gt;%</span></span>
<span id="cb181-5"><a href="text-analysis-i-fundamentals.html#cb181-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cleaned_review =</span> reviews <span class="sc">%&gt;%</span></span>
<span id="cb181-6"><a href="text-analysis-i-fundamentals.html#cb181-6" aria-hidden="true" tabindex="-1"></a>           <span class="co"># Fix some of the HTML placeholders</span></span>
<span id="cb181-7"><a href="text-analysis-i-fundamentals.html#cb181-7" aria-hidden="true" tabindex="-1"></a>           <span class="fu">replace_html</span>(<span class="at">symbol =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb181-8"><a href="text-analysis-i-fundamentals.html#cb181-8" aria-hidden="true" tabindex="-1"></a>           <span class="co"># Replace sequences of &quot;...&quot; </span></span>
<span id="cb181-9"><a href="text-analysis-i-fundamentals.html#cb181-9" aria-hidden="true" tabindex="-1"></a>           <span class="fu">replace_incomplete</span>(<span class="at">replacement =</span> <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb181-10"><a href="text-analysis-i-fundamentals.html#cb181-10" aria-hidden="true" tabindex="-1"></a>           <span class="co"># Replace less-common or misformatted HTML</span></span>
<span id="cb181-11"><a href="text-analysis-i-fundamentals.html#cb181-11" aria-hidden="true" tabindex="-1"></a>           <span class="fu">str_replace_all</span>(<span class="st">&quot;#.{1,4};&quot;</span>, <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb181-12"><a href="text-analysis-i-fundamentals.html#cb181-12" aria-hidden="true" tabindex="-1"></a>           <span class="co"># Replace some common non-A-Z, 1-9 symbols</span></span>
<span id="cb181-13"><a href="text-analysis-i-fundamentals.html#cb181-13" aria-hidden="true" tabindex="-1"></a>           <span class="fu">replace_symbol</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb181-14"><a href="text-analysis-i-fundamentals.html#cb181-14" aria-hidden="true" tabindex="-1"></a>           <span class="co"># Remove non-word text like &quot;:)&quot;</span></span>
<span id="cb181-15"><a href="text-analysis-i-fundamentals.html#cb181-15" aria-hidden="true" tabindex="-1"></a>           <span class="fu">replace_emoticon</span>() <span class="sc">%&gt;%</span></span>
<span id="cb181-16"><a href="text-analysis-i-fundamentals.html#cb181-16" aria-hidden="true" tabindex="-1"></a>           <span class="co"># Remove numbers from the reviews, as they are not useful</span></span>
<span id="cb181-17"><a href="text-analysis-i-fundamentals.html#cb181-17" aria-hidden="true" tabindex="-1"></a>           <span class="fu">str_remove_all</span>(<span class="st">&quot;[0-9]&quot;</span>))</span>
<span id="cb181-18"><a href="text-analysis-i-fundamentals.html#cb181-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-19"><a href="text-analysis-i-fundamentals.html#cb181-19" aria-hidden="true" tabindex="-1"></a>cleaned_reviews_example <span class="sc">%&gt;%</span></span>
<span id="cb181-20"><a href="text-analysis-i-fundamentals.html#cb181-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(beer_name, cleaned_review) <span class="sc">%&gt;%</span></span>
<span id="cb181-21"><a href="text-analysis-i-fundamentals.html#cb181-21" aria-hidden="true" tabindex="-1"></a>  gt<span class="sc">::</span><span class="fu">gt</span>()</span></code></pre></div>
<div id="swhgavipdk" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#swhgavipdk .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#swhgavipdk .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#swhgavipdk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#swhgavipdk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#swhgavipdk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#swhgavipdk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#swhgavipdk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#swhgavipdk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#swhgavipdk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#swhgavipdk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#swhgavipdk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#swhgavipdk .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#swhgavipdk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#swhgavipdk .gt_from_md > :first-child {
  margin-top: 0;
}

#swhgavipdk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#swhgavipdk .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#swhgavipdk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#swhgavipdk .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#swhgavipdk .gt_row_group_first td {
  border-top-width: 2px;
}

#swhgavipdk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#swhgavipdk .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#swhgavipdk .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#swhgavipdk .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#swhgavipdk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#swhgavipdk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#swhgavipdk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#swhgavipdk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#swhgavipdk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#swhgavipdk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#swhgavipdk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#swhgavipdk .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#swhgavipdk .gt_left {
  text-align: left;
}

#swhgavipdk .gt_center {
  text-align: center;
}

#swhgavipdk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#swhgavipdk .gt_font_normal {
  font-weight: normal;
}

#swhgavipdk .gt_font_bold {
  font-weight: bold;
}

#swhgavipdk .gt_font_italic {
  font-style: italic;
}

#swhgavipdk .gt_super {
  font-size: 65%;
}

#swhgavipdk .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#swhgavipdk .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#swhgavipdk .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#swhgavipdk .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#swhgavipdk .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#swhgavipdk .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">beer_name</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">cleaned_review</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">Stoudt's Weizen</td>
<td class="gt_row gt_left">Medium straw and cloudy with thick head and lace. Fresh smelling with slight lemon zest aroma. Taste is rich and fulfilling with strong lemon flavor. Also notable is the strong, almost overwhealming clove flavor. Fresh and thirst quenching. Goes great with brats at a German festival.</td></tr>
    <tr><td class="gt_row gt_left">Black Bear Ale</td>
<td class="gt_row gt_left">(--): Got a new bottle thanks to johnrobe, and unfortunately it was just as bad. This brewery either has ongoing issues or the beer is really supposed to taste this way. I am guessing it is the former. (--): Acquired via trade. This may be a good beer and I may have gotten a bad bottle but the vinegar aroma ruined this beer. I was given pause before I even had a chance to take a sip because the vinegar aroma is so potent. Plugging my nose and drinking did not help much as the vinegar was prevalent in the flavor as well. I will give this one another shot down the road but I had to pour this one out.</td></tr>
    <tr><td class="gt_row gt_left">Kozel</td>
<td class="gt_row gt_left">A truly good, authentic Pilsner, bordering on great. This is the type of Pilsner Beck's or Labatts (and most North American brewers) wished they could produce. They can't, this brew took time. Brew time and cellar time. The quality of ingredients and process are there for the palate to enjoy on this Pilsner. Soft barley and malt tastes balanced with those heavenly saaz bitters. A great example of Czech pilsen style lagers. This one has a distinguishing quality though. It has everything required of a good Pilsner, flowery hopping evident to the nose and palate, sharp crisp start, tart/malty/grassy in the mouth dry finish except, this one has no lingering tinny taste to the tongue from the saaz hops probably not pasteurized. I liked this Pilsner very much and that takes something for this fanatical Pils head . The only draw back is the price. dollar . per mil bottle. I was surprised this beer was so fresh tasting, date code was near e tongue sticking out ired and it sat unrefrigerated on the LCBO (our state liquor monopoly) shelf. A must try if you like Pilsners.</td></tr>
    <tr><td class="gt_row gt_left">Odell Cutthroat Pale Ale</td>
<td class="gt_row gt_left">This beer pours with a deep thick copper color and a thick foamy white head. The huge spicy aroma has just a hint of malt. The smooth medium body initiates an up-front caramel malt sweetness followed by a sharp spicy bitter bite. Very tasty.</td></tr>
    <tr><td class="gt_row gt_left">Pike XXXXX Stout</td>
<td class="gt_row gt_left">Nice pour, deep opaque black with an easy, thick creamy head that clings to the sides of the glass. It's not exactly long-lasting, but it never fully fades (ends up thin cream layer that's too thick for a film, but kind of like a like coat of moss or lichens). The aroma is a little weak, but roasty. The flavor is as strong as it should be but it dominated and unbalanced by too much burned bitterness. A bit of smokiness lingers underneath. The lack of balance makes this less than a joy to drink, but intriguing at the same time.</td></tr>
  </tbody>
  
  
</table>
</div>
<p>
<p>This will take slightly longer to run on the full data set, but should improve our overall data quality.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="text-analysis-i-fundamentals.html#cb182-1" aria-hidden="true" tabindex="-1"></a>beer_data <span class="ot">&lt;-</span> </span>
<span id="cb182-2"><a href="text-analysis-i-fundamentals.html#cb182-2" aria-hidden="true" tabindex="-1"></a>  beer_data <span class="sc">%&gt;%</span></span>
<span id="cb182-3"><a href="text-analysis-i-fundamentals.html#cb182-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cleaned_review =</span> reviews <span class="sc">%&gt;%</span></span>
<span id="cb182-4"><a href="text-analysis-i-fundamentals.html#cb182-4" aria-hidden="true" tabindex="-1"></a>           <span class="fu">replace_html</span>(<span class="at">symbol =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb182-5"><a href="text-analysis-i-fundamentals.html#cb182-5" aria-hidden="true" tabindex="-1"></a>           <span class="fu">replace_incomplete</span>(<span class="at">replacement =</span> <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb182-6"><a href="text-analysis-i-fundamentals.html#cb182-6" aria-hidden="true" tabindex="-1"></a>           <span class="fu">str_replace_all</span>(<span class="st">&quot;#.{1,4};&quot;</span>, <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb182-7"><a href="text-analysis-i-fundamentals.html#cb182-7" aria-hidden="true" tabindex="-1"></a>           <span class="fu">replace_symbol</span>() <span class="sc">%&gt;%</span></span>
<span id="cb182-8"><a href="text-analysis-i-fundamentals.html#cb182-8" aria-hidden="true" tabindex="-1"></a>           <span class="fu">replace_emoticon</span>() <span class="sc">%&gt;%</span></span>
<span id="cb182-9"><a href="text-analysis-i-fundamentals.html#cb182-9" aria-hidden="true" tabindex="-1"></a>           <span class="fu">str_remove_all</span>(<span class="st">&quot;[0-9]&quot;</span>))</span></code></pre></div>
<p>Again, this is not an exhaustive cleaning step–rather, these are some basic steps that I took based on common parsing errors I observed. Each particular text dataset will come with its own challenges and require a bit of time to develop the cleaning step.</p>
</div>
<div id="where-is-the-data-in-character-a-tidy-approach." class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Where is the data in <code>character</code>? A <em>tidy</em> approach.<a href="text-analysis-i-fundamentals.html#where-is-the-data-in-character-a-tidy-approach." class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As humans who understand English, we can see that meaning is easily found from these reviews. For example, we can guess that the rating of Black Bear Ale will be a low number (negative), while the rating of Kozel will be much more positive. And, indeed, this is the case:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="text-analysis-i-fundamentals.html#cb183-1" aria-hidden="true" tabindex="-1"></a>cleaned_reviews_example <span class="sc">%&gt;%</span> </span>
<span id="cb183-2"><a href="text-analysis-i-fundamentals.html#cb183-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(beer_name, appearance<span class="sc">:</span>rating)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 7
##   beer_name                appearance aroma palate taste overall rating
##   &lt;chr&gt;                         &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
## 1 Stoudt&#39;s Weizen                 4     3.5    4     4       4     3.88
## 2 Black Bear Ale                  3     1      1     1.5     1.5   1.42
## 3 Kozel                           4     4      4.5   4.5     4     4.25
## 4 Odell Cutthroat Pale Ale        4     4      4     4       4     4   
## 5 Pike XXXXX Stout                4.5   3      4     3.5     2.5   3.29</code></pre>
<p>But what part of the structure of the <code>reviews</code> text actually tells us this? This is a complicated topic that is well beyond the scope of this workshop–we are going to propose a single approach based on <strong>tokenization</strong> that is effective, but is certainly not exhaustive.</p>
<p>If you are interested in a broader view of approaches to text analysis, I recommend the seminal textbook from <a href="https://web.stanford.edu/~jurafsky/slp3/">Jurafsky and Martin, <em>Speech and Language Processing</em></a>, especially chapters 2-6. The draft version is freely available on the web as of the date of this workshop.</p>
<p>In the first half of this workshop we reviewed the <code>tidyverse</code> approach to data, in which we emphasized an approach to data in which:</p>
<blockquote>
<ul>
<li>Each variable is a column</li>
<li>Each observation is a row</li>
<li>Each type of observational unit is a table</li>
</ul>
</blockquote>
<p>This type of approach can be applied to text data <strong>if we can specify a way to standardize the “observations” within the text</strong>. We will be applying and demonstrating the approach defined and promoted by <a href="https://www.tidytextmining.com/index.html">Silge and Robinson in <em>Text Mining with R</em></a>, in which we will focus on the following syllogism to create tidy text data:</p>
<center>
<code>observation == token</code>
</center>
<p>A <strong>token</strong> is a <em>meaningful</em> unit of text, usually but not always a single word, which will be the observation for us. In our example data, let’s identify some possible tokens:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="text-analysis-i-fundamentals.html#cb185-1" aria-hidden="true" tabindex="-1"></a>cleaned_reviews_example<span class="sc">$</span>cleaned_review[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Medium straw and cloudy with thick head and lace. Fresh smelling with slight lemon zest aroma. Taste is rich and fulfilling with strong lemon flavor. Also notable is the strong, almost overwhealming clove flavor. Fresh and thirst quenching. Goes great with brats at a German festival.&quot;</code></pre>
<p>We will start with only examining single words, also called “<strong>unigrams</strong>” in the linguistics jargon. Thus, <code>Medium</code>, <code>straw</code>, and <code>cloudy</code> are the first tokens in this dataset. We will mostly ignore punctuation and spacing, which means we are giving up some meaning for convenience.</p>
<p>We could figure out how to manually break this up into tokens with enough work, using functions like <code>str_separate()</code>, but happily there are a large set of competing <code>R</code> tools for tokenization, for example:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="text-analysis-i-fundamentals.html#cb187-1" aria-hidden="true" tabindex="-1"></a>cleaned_reviews_example<span class="sc">$</span>cleaned_review[<span class="dv">1</span>] <span class="sc">%&gt;%</span></span>
<span id="cb187-2"><a href="text-analysis-i-fundamentals.html#cb187-2" aria-hidden="true" tabindex="-1"></a>  tokenizers<span class="sc">::</span><span class="fu">tokenize_words</span>(<span class="at">simplify =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;medium&quot;        &quot;straw&quot;         &quot;and&quot;           &quot;cloudy&quot;       
##  [5] &quot;with&quot;          &quot;thick&quot;         &quot;head&quot;          &quot;and&quot;          
##  [9] &quot;lace&quot;          &quot;fresh&quot;         &quot;smelling&quot;      &quot;with&quot;         
## [13] &quot;slight&quot;        &quot;lemon&quot;         &quot;zest&quot;          &quot;aroma&quot;        
## [17] &quot;taste&quot;         &quot;is&quot;            &quot;rich&quot;          &quot;and&quot;          
## [21] &quot;fulfilling&quot;    &quot;with&quot;          &quot;strong&quot;        &quot;lemon&quot;        
## [25] &quot;flavor&quot;        &quot;also&quot;          &quot;notable&quot;       &quot;is&quot;           
## [29] &quot;the&quot;           &quot;strong&quot;        &quot;almost&quot;        &quot;overwhealming&quot;
## [33] &quot;clove&quot;         &quot;flavor&quot;        &quot;fresh&quot;         &quot;and&quot;          
## [37] &quot;thirst&quot;        &quot;quenching&quot;     &quot;goes&quot;          &quot;great&quot;        
## [41] &quot;with&quot;          &quot;brats&quot;         &quot;at&quot;            &quot;a&quot;            
## [45] &quot;german&quot;        &quot;festival&quot;</code></pre>
<p>Note that this function also (by default) turns every word into its lowercase version (e.g., <code>Medium</code> becomes <code>medium</code>) and strips out punctuation. This is because, to a program like <code>R</code>, upper- and lowercase versions of the same string are <em>not</em> equivalent. If we have reason to believe preserving this difference is important, we might want to rethink allowing this behavior.</p>
<p>Now, we have 46 observed tokens for our first review in our example dataset. But of course this is not super interesting–we need to apply this kind of transformation to every single one of our ~20,000 reviews. With some fiddling around with <code>mutate()</code> we might be able to come up with a solution, but happily this is where we start using the <code>tidytext</code> package. The <code>unnest_tokens()</code> function built into that package will allow us to transform our text directly into the format we want, with very little effort.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="text-analysis-i-fundamentals.html#cb189-1" aria-hidden="true" tabindex="-1"></a>beer_data_tokenized <span class="ot">&lt;-</span></span>
<span id="cb189-2"><a href="text-analysis-i-fundamentals.html#cb189-2" aria-hidden="true" tabindex="-1"></a>  beer_data <span class="sc">%&gt;%</span></span>
<span id="cb189-3"><a href="text-analysis-i-fundamentals.html#cb189-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We may want to keep track of a unique ID for each review</span></span>
<span id="cb189-4"><a href="text-analysis-i-fundamentals.html#cb189-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">review_id =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb189-5"><a href="text-analysis-i-fundamentals.html#cb189-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> token,</span>
<span id="cb189-6"><a href="text-analysis-i-fundamentals.html#cb189-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">input =</span> cleaned_review,</span>
<span id="cb189-7"><a href="text-analysis-i-fundamentals.html#cb189-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">token =</span> <span class="st">&quot;words&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb189-8"><a href="text-analysis-i-fundamentals.html#cb189-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Here we do a bit of extra cleaning</span></span>
<span id="cb189-9"><a href="text-analysis-i-fundamentals.html#cb189-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">token =</span> <span class="fu">str_remove_all</span>(token, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.|_&quot;</span>))</span>
<span id="cb189-10"><a href="text-analysis-i-fundamentals.html#cb189-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-11"><a href="text-analysis-i-fundamentals.html#cb189-11" aria-hidden="true" tabindex="-1"></a>beer_data_tokenized <span class="sc">%&gt;%</span></span>
<span id="cb189-12"><a href="text-analysis-i-fundamentals.html#cb189-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We show just a few of the columns for printing&#39;s sake</span></span>
<span id="cb189-13"><a href="text-analysis-i-fundamentals.html#cb189-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(beer_name, rating, token)</span></code></pre></div>
<pre><code>## # A tibble: 1,770,136 × 3
##    beer_name           rating token
##    &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt;
##  1 Caffrey&#39;s Irish Ale   4.46 this 
##  2 Caffrey&#39;s Irish Ale   4.46 is   
##  3 Caffrey&#39;s Irish Ale   4.46 a    
##  4 Caffrey&#39;s Irish Ale   4.46 very 
##  5 Caffrey&#39;s Irish Ale   4.46 good 
##  6 Caffrey&#39;s Irish Ale   4.46 irish
##  7 Caffrey&#39;s Irish Ale   4.46 ale  
##  8 Caffrey&#39;s Irish Ale   4.46 i&#39;m  
##  9 Caffrey&#39;s Irish Ale   4.46 not  
## 10 Caffrey&#39;s Irish Ale   4.46 sure 
## # … with 1,770,126 more rows
## # ℹ Use `print(n = ...)` to see more rows</code></pre>
<p>The <code>unnest_tokens()</code> function actually applies the <code>tokenizers::tokenize_words()</code> function in an efficient, easy way: it takes a column of raw <code>character</code> data and then tokenizes it as specified, outputting a tidy format of 1-token-per-row. Now we have our observations (tokens) each on its own line, ready for further analysis.</p>
<p>In order to make what we’re doing easier to follow, let’s also take a look at our example data.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="text-analysis-i-fundamentals.html#cb191-1" aria-hidden="true" tabindex="-1"></a>cleaned_reviews_tokenized <span class="ot">&lt;-</span> </span>
<span id="cb191-2"><a href="text-analysis-i-fundamentals.html#cb191-2" aria-hidden="true" tabindex="-1"></a>  cleaned_reviews_example <span class="sc">%&gt;%</span></span>
<span id="cb191-3"><a href="text-analysis-i-fundamentals.html#cb191-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">input =</span> cleaned_review, <span class="at">output =</span> token) <span class="sc">%&gt;%</span></span>
<span id="cb191-4"><a href="text-analysis-i-fundamentals.html#cb191-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Here we do a bit of extra cleaning</span></span>
<span id="cb191-5"><a href="text-analysis-i-fundamentals.html#cb191-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">token =</span> <span class="fu">str_remove_all</span>(token, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.|_&quot;</span>))</span>
<span id="cb191-6"><a href="text-analysis-i-fundamentals.html#cb191-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-7"><a href="text-analysis-i-fundamentals.html#cb191-7" aria-hidden="true" tabindex="-1"></a>cleaned_reviews_tokenized <span class="sc">%&gt;%</span></span>
<span id="cb191-8"><a href="text-analysis-i-fundamentals.html#cb191-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(beer_name <span class="sc">==</span> <span class="st">&quot;Kozel&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb191-9"><a href="text-analysis-i-fundamentals.html#cb191-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Let&#39;s select a few variables for printing</span></span>
<span id="cb191-10"><a href="text-analysis-i-fundamentals.html#cb191-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(beer_name, rating, token)</span></code></pre></div>
<pre><code>## # A tibble: 187 × 3
##    beer_name rating token    
##    &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;    
##  1 Kozel       4.25 a        
##  2 Kozel       4.25 truly    
##  3 Kozel       4.25 good     
##  4 Kozel       4.25 authentic
##  5 Kozel       4.25 pilsner  
##  6 Kozel       4.25 bordering
##  7 Kozel       4.25 on       
##  8 Kozel       4.25 great    
##  9 Kozel       4.25 this     
## 10 Kozel       4.25 is       
## # … with 177 more rows
## # ℹ Use `print(n = ...)` to see more rows</code></pre>
<p>When we use <code>unnest_tokens()</code>, all of the non-text data gets treated as information about each token–so <code>beer_name</code>, <code>rating</code>, etc are duplicated for each token that now has its own row. This will allow us to perform a number of types of text analysis.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-visualization-basics-with-ggplot2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="text-analysis-ii-term-frequency-approaches.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
